default_platform(:ios)

platform :ios do
  desc "Build iOS IPA via Flutter"
  lane :build do
    sh("flutter pub get")
    sh("flutter build ipa --release")
  end

  desc "Upload to TestFlight (requires API key or Apple ID)"
  lane :beta do
    # Ensure you set App Store Connect API key or use Apple ID session
    # pilot(api_key: app_store_connect_api_key())
    pilot(skip_waiting_for_build_processing: true)
  end
end

